const hospitalPersonnelModel = require('../models/hospitalPersonnel.model');
const fs = require('fs');
const multer = require('multer');
const moment = require('moment');

exports.testing = (req, res, next) => {
    res.send('Admin Router works well!');
}

exports.signin = (req, res, next) => {

}

exports.signup = (req, res, next) => {
    
}

exports.update = (req, res, next) => {
    hospitalPersonnelModel.findByIdAndUpdate(req.query.id)
    .then(response => {
        res.status(201).send(response);
    })
    .catch(err => {
        res.status(500).send(`Server error ${err}`)
    })
}

exports.findAll = (req, res, next) => {
    hospitalPersonnelModel.find() 
    .then(response => {
        res.status(201).send(response);
    })
    .catch(err => {
        res.status(500).send(`Server error ${err}`)
    })
}

exports.findById = (req, res, next) => {
    hospitalPersonnelModel.findById(req.query.id) 
    .then(response => {
        res.status(201).send(response);
    })
    .catch(err => {
        res.status(500).send(`Server error ${err}`)
    })
}

exports.findByEmail = (req, res, next) => {
    const email = req.query.email;
    hospitalPersonnelModel.find({email}) 
    .then(response => {
        res.status(201).send(response);
    })
    .catch(err => {
        res.status(500).send(`Server error ${err}`)
    })
}

exports.findByRole = (req, res, next) => {
    const role = req.query.role;
    hospitalPersonnelModel.find({role}) 
    .then(response => {
        res.status(201).send(response);
    })
    .catch(err => {
        res.status(500).send(`Server error ${err}`)
    })
}

exports.findByHospitalId = (req, res, next) => {
    const hospitalId = req.query.hospitalId;
    hospitalPersonnelModel.find({hospitalId}) 
    .then(response => {
        res.status(201).send(response);
    })
    .catch(err => {
        res.status(500).send(`Server error ${err}`)
    })
}

exports.findByHospitalName = (req, res, next) => {
    const hospitalName = req.query.hospitalName;
    hospitalPersonnelModel.find({hospitalName}) 
    .then(response => {
        res.status(201).send(response);
    })
    .catch(err => {
        res.status(500).send(`Server error ${err}`)
    })
}